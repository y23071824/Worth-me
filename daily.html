<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>每日記錄</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 id="date-title">每日記錄</h1>

    <label>我為自己做了什麼：
        <textarea id="self-care-text"></textarea>
    </label>

    <label>情緒狀況：
        <select id="mood-select">
            <option value="green">綠（正向）</option>
            <option value="yellow">黃（普通）</option>
            <option value="red">紅（低落）</option>
        </select>
    </label>

    <label>類型標記：
        <select id="tag-select">
            <option value="emotion">情緒日記</option>
            <option value="learning">學習進度</option>
            <option value="money">金錢照顧</option>
        </select>
    </label>

    <label>今日金錢照顧自己金額（元）：
        <input type="number" id="money-spent" />
    </label>

    <button id="save-btn">儲存</button>
    <button onclick="window.location.href='index.html'">返回月曆</button>

    <script>
        const params = new URLSearchParams(window.location.search);
        const date = params.get("date");
        document.getElementById("date-title").textContent = "每日記錄：" + date;

        const selfCareText = document.getElementById("self-care-text");
        const moodSelect = document.getElementById("mood-select");
        const tagSelect = document.getElementById("tag-select");
        const moneySpent = document.getElementById("money-spent");

        const saveBtn = document.getElementById("save-btn");
        const key = "daily-" + date;

        // 載入舊資料
        const savedData = JSON.parse(localStorage.getItem(key));
        if (savedData) {
            selfCareText.value = savedData.text;
            moodSelect.value = savedData.mood;
            tagSelect.value = savedData.tag;
            moneySpent.value = savedData.money;
        }

        saveBtn.onclick = () => {
            const data = {
                text: selfCareText.value,
                mood: moodSelect.value,
                tag: tagSelect.value,
                money: moneySpent.value
            };
            localStorage.setItem(key, JSON.stringify(data));
            alert("已儲存！");
        };
    </script>
</body>
</html>