
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>每日紀錄</title>
  <link rel="stylesheet" href="style.css">
  <script>
    let currentDate = '';
    function loadData() {
      const urlParams = new URLSearchParams(window.location.search);
      const date = urlParams.get('date');
      currentDate = date;
      document.getElementById('date-title').textContent = date.replace(/-/g, "年").replace(/年(\d+)$/, "月$1日");

      const saved = JSON.parse(localStorage.getItem(date) || '{}');
      document.getElementById('text').value = saved.text || '';
      document.getElementById('emotion').value = saved.emotion || 'green';
    }

    function saveData() {
      const text = document.getElementById('text').value;
      const emotion = document.getElementById('emotion').value;
      const colorMap = { green: 'green', yellow: 'orange', red: 'red' };
      const data = {
        text: text,
        emotion: emotion,
        emotionColor: colorMap[emotion]
      };
      localStorage.setItem(currentDate, JSON.stringify(data));
      alert("已儲存！");
    }

    window.onload = loadData;
  </script>
</head>
<body>
  <h1 id="date-title"></h1>
  <p>今天我為自己做了什麼：</p>
  <textarea id="text" rows="6"></textarea>
  <p>狀況情緒：
    <select id="emotion">
      <option value="green">綠色：積極</option>
      <option value="yellow">黃色：普通</option>
      <option value="red">紅色：低落</option>
    </select>
  </p>
  <button onclick="saveData()">儲存</button>
  <a href="index.html"><button>返回月曆</button></a>
</body>
</html>
